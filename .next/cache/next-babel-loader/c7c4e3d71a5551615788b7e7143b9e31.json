{"ast":null,"code":"\"use strict\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport PropTypes from 'prop-types';\nimport Head from 'next/head';\nimport { Router, withTranslation } from '../i18n';\nimport Header from './parts/header';\nimport Footer from './parts/footer';\nimport { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport AD2HS from './parts/ad2hs';\nimport TemplateGeneric from './template/generic';\nimport TemplateFacebook from './template/facebook';\nimport TemplateTikTok from './template/tiktok';\nimport TemplateYoutube from './template/youtube';\nimport TemplateReddit from './template/reddit';\nimport TemplatePornhub from './template/pornhub';\nimport TemplateInstagram from './template/instagram';\nimport TemplateFleets from './template/fleets';\nconst {\n  h\n} = require(\"../hashMe\");\nconst Download = ({\n  t,\n  _loading,\n  _success,\n  _result,\n  _site,\n  link\n}) => {\n  const {\n    0: currentLink,\n    1: setCurrentLink\n  } = useState(link);\n  const {\n    0: new_link,\n    1: setNewLink\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(_loading);\n  const {\n    0: result,\n    1: setResult\n  } = useState(_result);\n  const {\n    0: success,\n    1: setSuccess\n  } = useState(_success);\n  const {\n    0: site,\n    1: setSite\n  } = useState(_site);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const {\n    0: showEmailForm,\n    1: setShowEmailForm\n  } = useState(false);\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: redirectLink,\n    1: setRedirectLink\n  } = useState(\"https://www.patreon.com/ddlvid\");\n  const submit = e => {\n    e.preventDefault();\n    setError(null);\n    if (new_link !== \"\") {\n      const supported_sites = [\"youtube.com\", \"youtu.be\", \"twitter.com\", \"linkedin.com\", \"facebook.com\", \"fb.com\", \"tiktok.com\", \"vimeo.com\", \"pornhub.com\", \"instagram.com\", \"reddit.com\", \"pinterest.com\", \"pin.it\", \"ok.ru\", \"periscope.tv\", \"pscp.tv\", \"t.co\", \"fb.watch\", \"fbwat.ch\", \"vk.com\", \"triller.co\"];\n      var supported = false;\n      for (let i = 0; i < supported_sites.length; i++) {\n        if (new_link.toLowerCase().indexOf(supported_sites[i]) >= 0) {\n          supported = true;\n          break;\n        }\n      }\n      if (supported) {\n        // window.open('https://dooloust.net/4/4681318', '_blank');\n        Router.push({\n          pathname: \"/download\",\n          query: {\n            link: new_link\n          }\n        });\n        load(new_link);\n      } else {\n        setError('Link not supported yet.');\n        window._gaq.push(['_trackEvent', 'notSupported', new_link]);\n      }\n    } else {\n      setError('Link is required.');\n    }\n    return false;\n  };\n  const load = async l => {\n    window.document.querySelector(\"#download\").classList.add(\"loading\");\n    setLoading(true);\n    var r;\n    r = await Axios.get(\"/api/v1/download1?url=\" + encodeURIComponent(l) + \"&h=\" + encodeURIComponent(h(l)));\n    setSuccess(r.data.success);\n    setResult(r.data.result);\n    setSite(r.data.site);\n    setCurrentLink(l);\n    setLoading(false);\n    window.document.querySelector(\"#download\").classList.remove(\"loading\");\n    setTimeout(() => {\n      if (false) {\n        const videos = window.document.querySelectorAll(\"video\");\n        for (let i = 0; i < videos.length; i++) {\n          videos[i].load();\n        }\n      }\n    }, 1);\n  };\n  const loadInstagram = async url => {\n    if (url.indexOf(\"/p/\") > 0) {\n      return await loadInstagramPost(url);\n    }\n    try {\n      const rr = await Axios.get(url);\n      var arr = url.replace(\"https://\", \"\").replace(\"http://\", \"\").split(\"?\");\n      var r = [];\n      arr = arr[0].split(\"/\");\n      arr.forEach(s => {\n        if (s !== \"\") r.push(s);\n      });\n      if (r.length === 2) {\n        url = \"https://www.instagram.com/stories/\" + r[1];\n      }\n      if (url.indexOf(\"instagram.com/stories/\") >= 0) {\n        var user_id = null;\n        var username = \"\";\n        var regex = /\\\"id\\\"\\:\\\"(\\d+)\\\"/i;\n        var match = regex.exec(rr.data);\n        if (match && match.length > 1) {\n          user_id = match[1];\n        }\n        regex = /\\\"alternateName\\\"\\:\\\"\\@(.*?)\\\"/i;\n        match = regex.exec(rr.data);\n        if (match && match.length > 1) {\n          username = match[1];\n        }\n        if (user_id) {\n          return await loadInstagramStories(username, user_id);\n        } else {\n          return {\n            success: false,\n            result: null,\n            site: \"instagram\"\n          };\n        }\n      } else {\n        return await loadInstagramPost(url);\n      }\n    } catch (err) {\n      return {\n        success: false,\n        result: null,\n        site: \"instagram\"\n      };\n    }\n  };\n  const loadInstagramStories = async (username, user_id) => {\n    const r = await Axios.get(\"/api/v1/get-insta-stories?username=\" + encodeURIComponent(username) + \"&user_id=\" + encodeURIComponent(user_id) + \"&h=\" + encodeURIComponent(h(user_id)));\n    return r.data;\n  };\n  const loadInstagramPost = async url => {\n    var regex = /instagram.com\\/(\\w+)\\/(.*?)\\//i;\n    var match = regex.exec(url + \"/\");\n    if (match && match.length > 1) {\n      try {\n        let title = \"Instagram Video\";\n        let thumb = \"\";\n        let videos = [];\n        const r = await Axios.get(\"https://www.instagram.com/graphql/query/?query_hash=55a3c4bad29e4e20c20ff4cdfd80f5b4&variables=\" + encodeURIComponent(JSON.stringify({\n          \"shortcode\": match[2]\n        })));\n        const data = r.data.data.shortcode_media;\n        if (\"edge_media_to_caption\" in data && data.edge_media_to_caption.edges && data.edge_media_to_caption.edges.length > 0) {\n          title = data.edge_media_to_caption.edges[0].node.text;\n        }\n        if (\"display_url\" in data) {\n          thumb = data.display_url;\n        }\n        if (\"is_video\" in data && data.is_video) {\n          if (\"video_url\" in data) {\n            var video_url = data.video_url;\n            video_url = \"https://d.ddlvid.com/api/v1/download-video?u=\" + encodeURIComponent(video_url) + \"&h=\" + encodeURIComponent(h(video_url)) + \"&t=\" + encodeURIComponent(title);\n            videos.push({\n              url: video_url,\n              type: 'video'\n            });\n          }\n        } else {\n          if (\"display_url\" in data) {\n            var video_url = data.display_url;\n            video_url = \"https://d.ddlvid.com/api/v1/download-image?u=\" + encodeURIComponent(video_url) + \"&h=\" + encodeURIComponent(h(video_url)) + \"&t=\" + encodeURIComponent(title);\n            videos.push({\n              url: data.display_url,\n              type: 'image'\n            });\n          }\n        }\n        return {\n          success: true,\n          result: {\n            title,\n            videos,\n            thumb\n          },\n          site: \"instagram\"\n        };\n      } catch (err) {}\n    }\n    return {\n      success: false,\n      result: null,\n      site: \"instagram\"\n    };\n  };\n  useEffect(() => {\n    if (\"twttr\" in window) {\n      try {\n        window.twttr.widgets.load();\n      } catch (e) {}\n    }\n    if (window.location.host.indexOf(\"localhost\") < 0 && window.location.host.indexOf(\"127.0.0.1\") < 0) {\n      window._gaq = window._gaq || [];\n      window._gaq.push(['_setAccount', 'UA-162923642-1']);\n      window._gaq.push(['_trackPageview']);\n      var bounceKiller = {\n        trackScrolling: true,\n        scrollingPercentageNumber: 25,\n        logInterval: 10,\n        trackEvents: true,\n        trackMaxTime: true,\n        trackMaxTimeSec: 900\n      };\n      window.scrollTrackEnd = false;\n      window.ScrollMatrix = new Array();\n      function TrackingLogTime(a) {\n        return a[0] == 50 ? parseInt(a[1]) + 1 + \":00\" : (a[1] || \"0\") + \":\" + (parseInt(a[0]) + 10);\n      }\n      if (bounceKiller.trackEvents) {\n        function startTimeTracking(a) {\n          window.intervalObj = window.setInterval(function () {\n            a = TrackingLogTime(a.split(\":\").reverse());\n            window._gaq.push(['_trackEvent', \"Time\", \"LOG\", a]);\n          }, bounceKiller.logInterval * 1000);\n          if (bounceKiller.trackMaxTime) {\n            window.trackMaxTimeTimeout = setTimeout(function () {\n              clearInterval(window.intervalObj);\n            }, bounceKiller.trackMaxTimeSec * 1000);\n          }\n        }\n        window.document.addEventListener(\"DOMContentLoaded\", function () {\n          startTimeTracking(\"00\");\n        });\n      }\n      if (bounceKiller.trackScrolling) {\n        window.Frequency = bounceKiller.scrollingPercentageNumber;\n        window.Repentance = 100 / bounceKiller.scrollingPercentageNumber;\n        window.ScrollMatrix = new Array();\n        for (var ix = 0; ix < window.Repentance; ix++) {\n          window.ScrollMatrix[ix] = [window.Frequency, \"false\"];\n          window.Frequency = bounceKiller.scrollingPercentageNumber + window.Frequency;\n        }\n      }\n      ;\n      var scrollFunc = function () {\n        if (bounceKiller.trackScrolling) {\n          if (!window.scrollTrackEnd) {\n            window._gaq.push(['_trackEvent', \"Scroll\", \"LOG\", \"scrolled\"]);\n            window.scrollTrackEnd = true;\n          }\n        }\n        if (bounceKiller.trackScrolling) {\n          var body = window.document.body,\n            html = window.document.documentElement;\n          var documentHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n          for (var iz = 0; iz < window.ScrollMatrix.length; iz++) {\n            if (window.scrollY + window.innerHeight >= documentHeight * window.ScrollMatrix[iz][0] / 100 && window.ScrollMatrix[iz][1] == \"false\") {\n              window.ScrollMatrix[iz][1] = \"true\";\n              window._gaq.push(['_trackEvent', \"Percentage Page Scroll\", \"LOG\", window.ScrollMatrix[iz][0] + \"%\", {\n                nonInteraction: false\n              }]);\n            }\n          }\n        }\n      };\n      window.addEventListener('scroll', scrollFunc, true);\n      (function () {\n        var ga = window.document.createElement('script');\n        ga.type = 'text/javascript';\n        ga.async = true;\n        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n        var s = window.document.getElementsByTagName('script')[0];\n        s.parentNode.insertBefore(ga, s);\n      })();\n    }\n    load(link);\n  }, []);\n\n  // useEffect(() => {\n  //     const script = document.createElement('script');\n  //     script.src = 'https://upgulpinon.com/1?z=4692603';\n  //     document.body.appendChild(script);\n  //     return () => {\n  //         document.body.removeChild(script);\n  //     }\n  // }, [link])      \n\n  const localDownload = async (url, backup_url, filename, ext) => {\n    if (typeof ext === \"undefined\") {\n      ext = \".mp4\";\n    }\n    if (filename === \"\") {\n      filename = new Date().getTime() + ext;\n    }\n    try {\n      const config = {\n        responseType: 'blob'\n      };\n      setLoading(true);\n      const r = await Axios.get(url, config);\n      const blob = new Blob([r.data]);\n      const link = window.document.createElement('a');\n      link.href = window.URL.createObjectURL(blob);\n      link.download = \"DDLVID.COM-\" + filename;\n      setLoading(false);\n      link.click();\n    } catch (error) {\n      setLoading(false);\n      window.location = backup_url;\n    }\n  };\n  let Template = TemplateGeneric;\n  if (site === \"facebook\" || site === \"vk\") {\n    Template = TemplateFacebook;\n  }\n  if (site === \"tiktok\") {\n    Template = TemplateTikTok;\n  }\n  if (site === \"youtube\") {\n    Template = TemplateYoutube;\n  }\n  if (site === \"reddit\") {\n    Template = TemplateReddit;\n  }\n  if (site === \"pornhub\") {\n    Template = TemplatePornhub;\n  }\n  if (site === \"instagram\") {\n    Template = TemplateInstagram;\n  }\n  if (site === \"fleets\") {\n    Template = TemplateFleets;\n  }\n  return __jsx(\"div\", {\n    id: \"download\",\n    className: \"jsx-3105550290\"\n  }, result ? __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-3105550290\"\n  }, result.title, \" - DDLVid\"), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: result.title,\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    property: \"og:description\",\n    content: \"Click Here To Download\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    property: \"og:image\",\n    content: \"https://ddlvid.com/icon.png\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    property: \"og:type\",\n    content: \"website\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: \"https://ddlvid.com/download?link=\" + encodeURIComponent(link),\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    property: \"og:site_name\",\n    content: \"DDLVid\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"twitter:card\",\n    content: \"summary\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"twitter:site\",\n    content: \"@ddl_vid\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"twitter:title\",\n    content: \"Click Here To Download\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"twitter:description\",\n    content: result.title,\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"twitter:creator\",\n    content: \"@ddl_vid\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"twitter:image\",\n    content: \"https://ddlvid.com/icon.png\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"robots\",\n    content: \"noindex\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"meta\", {\n    name: \"googlebot\",\n    content: \"noindex\",\n    className: \"jsx-3105550290\"\n  })) : __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-3105550290\"\n  }, \"DDLVid - Online Video Downloader\")), __jsx(\"main\", {\n    className: \"jsx-3105550290\"\n  }, __jsx(Header, null), loading ? __jsx(\"div\", {\n    id: \"loader\",\n    className: \"jsx-3105550290\"\n  }, __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"180px\",\n    height: \"180px\",\n    viewBox: \"0 0 180 180\",\n    enableBackground: \"new 0 0 180 180\",\n    className: \"jsx-3105550290\"\n  }, __jsx(\"path\", {\n    d: \"M49.986 13.226v112.52c22.117-.295 44.354.8 66.374-1.098 19.947-1.902 41.022-7.9 51.93-20.97 11.94-14.11 12.673-31.538 10.12-47.56-2.545-13.692-12.094-27.54-29.344-34.23-21.655-9-47.3-8.797-71.487-8.663zm24.82 20.424c18.934-.976 44.055-1.7 56.95 3.657 13.55 6.04 23.03 16.99 23.768 28.652.987 9.275-1.6 19.22-10.546 26.22-7.87 6.88-18.644 12.106-30.958 13.452-13.216 1.822-26.715.882-40.06.823z\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"path\", {\n    d: \"M130.086 165.907V53.387c-22.117.295-44.354-.8-66.374 1.098-19.947 1.902-41.022 7.9-51.93 20.97-11.94 14.11-12.673 31.538-10.12 47.56 2.545 13.692 12.094 27.54 29.344 34.23 21.655 9 47.3 8.797 71.487 8.663zm-24.82-20.424c-18.934.976-44.055 1.7-56.95-3.657-13.55-6.04-23.03-16.99-23.768-28.652-.987-9.275 1.6-19.22 10.546-26.22 7.87-6.88 18.644-12.106 30.958-13.452 13.216-1.822 26.715-.882 40.06-.823z\",\n    className: \"jsx-3105550290\"\n  }))) : null, !loading ? __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"downloadContent\"\n  }, success ? __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"container\"\n  }, __jsx(Template, {\n    result: result,\n    site: site,\n    link: link,\n    localDownload: localDownload,\n    showEmailForm: link => {\n      setRedirectLink(link);\n      if (!window.sessionStorage.getItem(\"emailForm\")) {\n        window.sessionStorage.setItem(\"emailForm\", true);\n        setShowEmailForm(true);\n      } else {\n        window.location = link;\n      }\n    },\n    className: \"jsx-3105550290\"\n  }), showEmailForm ? __jsx(\"div\", {\n    id: \"emailForm\",\n    className: \"jsx-3105550290\"\n  }, __jsx(\"span\", {\n    onClick: () => setShowEmailForm(false),\n    className: \"jsx-3105550290\" + \" \" + 'close'\n  }, \"x\"), __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"container\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-3105550290\"\n  }, \"Fill in your email for the download. Happy downloading!\"), __jsx(\"p\", {\n    className: \"jsx-3105550290\"\n  }, __jsx(\"input\", {\n    type: \"email\",\n    placeholder: \"Enter your email address\",\n    onChange: e => setEmail(e.target.value),\n    className: \"jsx-3105550290\"\n  })), __jsx(\"p\", {\n    style: {\n      textAlign: 'right'\n    },\n    className: \"jsx-3105550290\"\n  }, __jsx(\"button\", {\n    onClick: () => {\n      var validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n      if (email.match(validRegex)) {\n        setLoading(true);\n        Axios.get(\"/api/subscribe?email=\" + encodeURIComponent(email)).then(() => {\n          setLoading(false);\n          setShowEmailForm(false);\n          window.location = redirectLink;\n        });\n      }\n    },\n    className: \"jsx-3105550290\"\n  }, \"Download\")))) : null, __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"downloadForm\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"container\"\n  }, __jsx(\"form\", {\n    action: \"/download\",\n    method: \"get\",\n    onSubmit: submit,\n    className: \"jsx-3105550290\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"field\"\n  }, __jsx(\"input\", {\n    name: \"link\",\n    id: \"link\",\n    placeholder: \"https://\",\n    value: new_link,\n    onChange: e => setNewLink(e.target.value),\n    pattern: \"https?://.+\",\n    required: true,\n    \"aria-label\": t('link_to_download'),\n    autoComplete: \"off\",\n    className: \"jsx-3105550290\"\n  }), __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"download\"\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-3105550290\"\n  }, t('get_a_new_video'))), error ? __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"error_message\"\n  }, error) : null))))) : __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"card\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"error_description\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"container\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3105550290\" + \" \" + \"error\"\n  }, t('404_headline'), \" :/\"), __jsx(\"p\", {\n    className: \"jsx-3105550290\"\n  }, t('404_body1')), __jsx(\"p\", {\n    className: \"jsx-3105550290\"\n  }, t('404_body2')))))) : null), __jsx(Footer, null), __jsx(AD2HS, null), __jsx(_JSXStyle, {\n    id: \"3105550290\"\n  }, \"html,body{padding:0;margin:0;font-family:\\\"Plex\\\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen, Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;}*{box-sizing:border-box;}*:focus{outline:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxDbGllbnRzIFBhbmVsXFxXZWIgRGV2ZWxvcG1lbnRcXGRkbHZpZDFvbGRcXHBhZ2VzXFxkb3dubG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErZ0IrQixBQUkyQixBQU9ZLEFBR1QsVUFUSixHQVVULE1BUndFLEdBS3hFLHlJQUpBIiwiZmlsZSI6IkQ6XFxDbGllbnRzIFBhbmVsXFxXZWIgRGV2ZWxvcG1lbnRcXGRkbHZpZDFvbGRcXHBhZ2VzXFxkb3dubG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJztcclxuaW1wb3J0IHsgUm91dGVyLCB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICcuLi9pMThuJztcclxuaW1wb3J0IEhlYWRlciBmcm9tICcuL3BhcnRzL2hlYWRlcic7XHJcbmltcG9ydCBGb290ZXIgZnJvbSAnLi9wYXJ0cy9mb290ZXInO1xyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgQXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgQUQySFMgZnJvbSAnLi9wYXJ0cy9hZDJocyc7XHJcbmltcG9ydCBUZW1wbGF0ZUdlbmVyaWMgZnJvbSAnLi90ZW1wbGF0ZS9nZW5lcmljJztcclxuaW1wb3J0IFRlbXBsYXRlRmFjZWJvb2sgZnJvbSAnLi90ZW1wbGF0ZS9mYWNlYm9vayc7XHJcbmltcG9ydCBUZW1wbGF0ZVRpa1RvayBmcm9tICcuL3RlbXBsYXRlL3Rpa3Rvayc7XHJcbmltcG9ydCBUZW1wbGF0ZVlvdXR1YmUgZnJvbSAnLi90ZW1wbGF0ZS95b3V0dWJlJztcclxuaW1wb3J0IFRlbXBsYXRlUmVkZGl0IGZyb20gJy4vdGVtcGxhdGUvcmVkZGl0JztcclxuaW1wb3J0IFRlbXBsYXRlUG9ybmh1YiBmcm9tICcuL3RlbXBsYXRlL3Bvcm5odWInO1xyXG5pbXBvcnQgVGVtcGxhdGVJbnN0YWdyYW0gZnJvbSAnLi90ZW1wbGF0ZS9pbnN0YWdyYW0nO1xyXG5pbXBvcnQgVGVtcGxhdGVGbGVldHMgZnJvbSAnLi90ZW1wbGF0ZS9mbGVldHMnO1xyXG5cclxuY29uc3QgeyBoIH0gPSByZXF1aXJlKFwiLi4vaGFzaE1lXCIpO1xyXG5cclxuY29uc3QgRG93bmxvYWQgPSAoeyB0LCBfbG9hZGluZywgX3N1Y2Nlc3MsIF9yZXN1bHQsIF9zaXRlLCBsaW5rIH0pID0+IHtcclxuXHJcbiAgICBjb25zdCBbY3VycmVudExpbmssIHNldEN1cnJlbnRMaW5rXSA9IHVzZVN0YXRlKGxpbmspO1xyXG4gICAgY29uc3QgW25ld19saW5rLCBzZXROZXdMaW5rXSA9IHVzZVN0YXRlKFwiXCIpO1xyXG4gICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoX2xvYWRpbmcpO1xyXG4gICAgY29uc3QgW3Jlc3VsdCwgc2V0UmVzdWx0XSA9IHVzZVN0YXRlKF9yZXN1bHQpO1xyXG4gICAgY29uc3QgW3N1Y2Nlc3MsIHNldFN1Y2Nlc3NdID0gdXNlU3RhdGUoX3N1Y2Nlc3MpO1xyXG4gICAgY29uc3QgW3NpdGUsIHNldFNpdGVdID0gdXNlU3RhdGUoX3NpdGUpO1xyXG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICAgIGNvbnN0IFtzaG93RW1haWxGb3JtLCBzZXRTaG93RW1haWxGb3JtXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIGNvbnN0IFtlbWFpbCwgc2V0RW1haWxdID0gdXNlU3RhdGUoXCJcIik7XHJcbiAgICBjb25zdCBbcmVkaXJlY3RMaW5rLCBzZXRSZWRpcmVjdExpbmtdID0gdXNlU3RhdGUoXCJodHRwczovL3d3dy5wYXRyZW9uLmNvbS9kZGx2aWRcIik7XHJcblxyXG4gICAgY29uc3Qgc3VibWl0ID0gKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgICAgaWYgKG5ld19saW5rICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRlZF9zaXRlcyA9IFtcclxuICAgICAgICAgICAgICAgIFwieW91dHViZS5jb21cIixcclxuICAgICAgICAgICAgICAgIFwieW91dHUuYmVcIixcclxuICAgICAgICAgICAgICAgIFwidHdpdHRlci5jb21cIixcclxuICAgICAgICAgICAgICAgIFwibGlua2VkaW4uY29tXCIsXHJcbiAgICAgICAgICAgICAgICBcImZhY2Vib29rLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgXCJmYi5jb21cIixcclxuICAgICAgICAgICAgICAgIFwidGlrdG9rLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ2aW1lby5jb21cIixcclxuICAgICAgICAgICAgICAgIFwicG9ybmh1Yi5jb21cIixcclxuICAgICAgICAgICAgICAgIFwiaW5zdGFncmFtLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgXCJyZWRkaXQuY29tXCIsXHJcbiAgICAgICAgICAgICAgICBcInBpbnRlcmVzdC5jb21cIixcclxuICAgICAgICAgICAgICAgIFwicGluLml0XCIsXHJcbiAgICAgICAgICAgICAgICBcIm9rLnJ1XCIsXHJcbiAgICAgICAgICAgICAgICBcInBlcmlzY29wZS50dlwiLFxyXG4gICAgICAgICAgICAgICAgXCJwc2NwLnR2XCIsXHJcbiAgICAgICAgICAgICAgICBcInQuY29cIixcclxuICAgICAgICAgICAgICAgIFwiZmIud2F0Y2hcIixcclxuICAgICAgICAgICAgICAgIFwiZmJ3YXQuY2hcIixcclxuICAgICAgICAgICAgICAgIFwidmsuY29tXCIsXHJcbiAgICAgICAgICAgICAgICBcInRyaWxsZXIuY29cIlxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB2YXIgc3VwcG9ydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3VwcG9ydGVkX3NpdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3X2xpbmsudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN1cHBvcnRlZF9zaXRlc1tpXSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN1cHBvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93Lm9wZW4oJ2h0dHBzOi8vZG9vbG91c3QubmV0LzQvNDY4MTMxOCcsICdfYmxhbmsnKTtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRobmFtZTogXCIvZG93bmxvYWRcIixcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogeyBsaW5rOiBuZXdfbGluayB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxvYWQobmV3X2xpbmspO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0xpbmsgbm90IHN1cHBvcnRlZCB5ZXQuJyk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuX2dhcS5wdXNoKFsnX3RyYWNrRXZlbnQnLCAnbm90U3VwcG9ydGVkJywgbmV3X2xpbmtdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNldEVycm9yKCdMaW5rIGlzIHJlcXVpcmVkLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbG9hZCA9IGFzeW5jIChsKSA9PiB7XHJcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZG93bmxvYWRcIikuY2xhc3NMaXN0LmFkZChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICB2YXIgcjtcclxuICAgICAgICByID0gYXdhaXQgQXhpb3MuZ2V0KFwiL2FwaS92MS9kb3dubG9hZDE/dXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGwpICsgXCImaD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChoKGwpKSk7XHJcbiAgICAgICAgc2V0U3VjY2VzcyhyLmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgc2V0UmVzdWx0KHIuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgIHNldFNpdGUoci5kYXRhLnNpdGUpO1xyXG4gICAgICAgIHNldEN1cnJlbnRMaW5rKGwpO1xyXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rvd25sb2FkXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJsb2FkaW5nXCIpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvcyA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidmlkZW9cIik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpZGVvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvc1tpXS5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2FkSW5zdGFncmFtID0gYXN5bmMgKHVybCkgPT4ge1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihcIi9wL1wiKSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGxvYWRJbnN0YWdyYW1Qb3N0KHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJyID0gYXdhaXQgQXhpb3MuZ2V0KHVybCk7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSB1cmwucmVwbGFjZShcImh0dHBzOi8vXCIsXCJcIikucmVwbGFjZShcImh0dHA6Ly9cIixcIlwiKS5zcGxpdChcIj9cIik7XHJcbiAgICAgICAgICAgIHZhciByID0gW107XHJcbiAgICAgICAgICAgIGFyciA9IGFyclswXS5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHMgIT09IFwiXCIpIHIucHVzaChzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdXJsID0gXCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL3N0b3JpZXMvXCIgKyByWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihcImluc3RhZ3JhbS5jb20vc3Rvcmllcy9cIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJfaWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IC9cXFwiaWRcXFwiXFw6XFxcIihcXGQrKVxcXCIvaTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHJlZ2V4LmV4ZWMocnIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaWQgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlZ2V4ID0gL1xcXCJhbHRlcm5hdGVOYW1lXFxcIlxcOlxcXCJcXEAoLio/KVxcXCIvaTtcclxuICAgICAgICAgICAgICAgIG1hdGNoID0gcmVnZXguZXhlYyhyci5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh1c2VyX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGxvYWRJbnN0YWdyYW1TdG9yaWVzKHVzZXJuYW1lLCB1c2VyX2lkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZTogXCJpbnN0YWdyYW1cIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBsb2FkSW5zdGFncmFtUG9zdCh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfcKgY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHNpdGU6IFwiaW5zdGFncmFtXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbG9hZEluc3RhZ3JhbVN0b3JpZXMgPSBhc3luYyAodXNlcm5hbWUsIHVzZXJfaWQpID0+IHtcclxuICAgICAgICBjb25zdCByID0gYXdhaXQgQXhpb3MuZ2V0KFwiL2FwaS92MS9nZXQtaW5zdGEtc3Rvcmllcz91c2VybmFtZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh1c2VybmFtZSkgKyBcIiZ1c2VyX2lkPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJfaWQpICsgXCImaD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChoKHVzZXJfaWQpKSk7XHJcbiAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2FkSW5zdGFncmFtUG9zdCA9IGFzeW5jICh1cmwpID0+IHtcclxuICAgICAgICB2YXIgcmVnZXggPSAvaW5zdGFncmFtLmNvbVxcLyhcXHcrKVxcLyguKj8pXFwvL2k7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gcmVnZXguZXhlYyh1cmwgKyBcIi9cIik7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IFwiSW5zdGFncmFtIFZpZGVvXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGh1bWIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgbGV0IHZpZGVvcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBBeGlvcy5nZXQoXCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2dyYXBocWwvcXVlcnkvP3F1ZXJ5X2hhc2g9NTVhM2M0YmFkMjllNGUyMGMyMGZmNGNkZmQ4MGY1YjQmdmFyaWFibGVzPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBcInNob3J0Y29kZVwiOiBtYXRjaFsyXVxyXG4gICAgICAgICAgICAgICAgfSkpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByLmRhdGEuZGF0YS5zaG9ydGNvZGVfbWVkaWE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFwiZWRnZV9tZWRpYV90b19jYXB0aW9uXCIgaW4gZGF0YSAmJiBkYXRhLmVkZ2VfbWVkaWFfdG9fY2FwdGlvbi5lZGdlcyAmJiBkYXRhLmVkZ2VfbWVkaWFfdG9fY2FwdGlvbi5lZGdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBkYXRhLmVkZ2VfbWVkaWFfdG9fY2FwdGlvbi5lZGdlc1swXS5ub2RlLnRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFwiZGlzcGxheV91cmxcIiBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIgPSBkYXRhLmRpc3BsYXlfdXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChcImlzX3ZpZGVvXCIgaW4gZGF0YSAmJiBkYXRhLmlzX3ZpZGVvKSB7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcInZpZGVvX3VybFwiIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvX3VybCA9IGRhdGEudmlkZW9fdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb191cmwgPSBcImh0dHBzOi8vZC5kZGx2aWQuY29tL2FwaS92MS9kb3dubG9hZC12aWRlbz91PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZpZGVvX3VybCkgKyBcIiZoPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGgodmlkZW9fdXJsKSkgKyBcIiZ0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB2aWRlb191cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiZGlzcGxheV91cmxcIiBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb191cmwgPSBkYXRhLmRpc3BsYXlfdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb191cmwgPSBcImh0dHBzOi8vZC5kZGx2aWQuY29tL2FwaS92MS9kb3dubG9hZC1pbWFnZT91PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZpZGVvX3VybCkgKyBcIiZoPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGgodmlkZW9fdXJsKSkgKyBcIiZ0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBkYXRhLmRpc3BsYXlfdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHVtYlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2l0ZTogXCJpbnN0YWdyYW1cIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoKGVycikge31cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICByZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHNpdGU6IFwiaW5zdGFncmFtXCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoXCJ0d3R0clwiIGluIHdpbmRvdykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnR3dHRyLndpZGdldHMubG9hZCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3QuaW5kZXhPZihcImxvY2FsaG9zdFwiKSA8IDAgJiYgd2luZG93LmxvY2F0aW9uLmhvc3QuaW5kZXhPZihcIjEyNy4wLjAuMVwiKSA8IDApIHtcclxuICAgICAgICAgICAgd2luZG93Ll9nYXEgPSB3aW5kb3cuX2dhcSB8fCBbXTtcclxuICAgICAgICAgICAgd2luZG93Ll9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTE2MjkyMzY0Mi0xJ10pO1xyXG4gICAgICAgICAgICB3aW5kb3cuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XHJcbiAgICAgIFxyXG4gICAgICAgICAgICB2YXIgYm91bmNlS2lsbGVyID0ge1xyXG4gICAgICAgICAgICAgIHRyYWNrU2Nyb2xsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHNjcm9sbGluZ1BlcmNlbnRhZ2VOdW1iZXI6IDI1LFxyXG4gICAgICAgICAgICAgIGxvZ0ludGVydmFsOiAxMCxcclxuICAgICAgICAgICAgICB0cmFja0V2ZW50czogdHJ1ZSxcclxuICAgICAgICAgICAgICB0cmFja01heFRpbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgdHJhY2tNYXhUaW1lU2VjOiA5MDBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRyYWNrRW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHdpbmRvdy5TY3JvbGxNYXRyaXggPSBuZXcgQXJyYXkoKTtcclxuICAgICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFRyYWNraW5nTG9nVGltZShhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYVswXSA9PSA1MCA/IChwYXJzZUludChhWzFdKSArIDEpICsgXCI6MDBcIiA6IChhWzFdIHx8IFwiMFwiKSArIFwiOlwiICsgKHBhcnNlSW50KGFbMF0pICsgMTApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgICAgIGlmIChib3VuY2VLaWxsZXIudHJhY2tFdmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN0YXJ0VGltZVRyYWNraW5nKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaW50ZXJ2YWxPYmogPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBUcmFja2luZ0xvZ1RpbWUoYS5zcGxpdChcIjpcIikucmV2ZXJzZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Ll9nYXEucHVzaChbJ190cmFja0V2ZW50JywgXCJUaW1lXCIsIFwiTE9HXCIsIGFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBib3VuY2VLaWxsZXIubG9nSW50ZXJ2YWwgKiAxMDAwKVxyXG4gICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm91bmNlS2lsbGVyLnRyYWNrTWF4VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cudHJhY2tNYXhUaW1lVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHdpbmRvdy5pbnRlcnZhbE9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGJvdW5jZUtpbGxlci50cmFja01heFRpbWVTZWMgKiAxMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lVHJhY2tpbmcoXCIwMFwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKGJvdW5jZUtpbGxlci50cmFja1Njcm9sbGluZykge1xyXG4gICAgICAgICAgICAgICAgICB3aW5kb3cuRnJlcXVlbmN5ID0gYm91bmNlS2lsbGVyLnNjcm9sbGluZ1BlcmNlbnRhZ2VOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5SZXBlbnRhbmNlID0gMTAwIC8gYm91bmNlS2lsbGVyLnNjcm9sbGluZ1BlcmNlbnRhZ2VOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5TY3JvbGxNYXRyaXggPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaXggPSAwOyBpeCA8IHdpbmRvdy5SZXBlbnRhbmNlOyBpeCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuU2Nyb2xsTWF0cml4W2l4XSA9IFt3aW5kb3cuRnJlcXVlbmN5LCBcImZhbHNlXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93LkZyZXF1ZW5jeSA9IGJvdW5jZUtpbGxlci5zY3JvbGxpbmdQZXJjZW50YWdlTnVtYmVyICsgd2luZG93LkZyZXF1ZW5jeTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAgICAgICAgIHZhciBzY3JvbGxGdW5jID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmIChib3VuY2VLaWxsZXIudHJhY2tTY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5zY3JvbGxUcmFja0VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuX2dhcS5wdXNoKFsnX3RyYWNrRXZlbnQnLCBcIlNjcm9sbFwiLCBcIkxPR1wiLCBcInNjcm9sbGVkXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRyYWNrRW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYm91bmNlS2lsbGVyLnRyYWNrU2Nyb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSB3aW5kb3cuZG9jdW1lbnQuYm9keSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2N1bWVudEhlaWdodCA9IE1hdGgubWF4KCBib2R5LnNjcm9sbEhlaWdodCwgYm9keS5vZmZzZXRIZWlnaHQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLmNsaWVudEhlaWdodCwgaHRtbC5zY3JvbGxIZWlnaHQsIGh0bWwub2Zmc2V0SGVpZ2h0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGl6ID0gMDsgaXogPCB3aW5kb3cuU2Nyb2xsTWF0cml4Lmxlbmd0aDsgaXorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHdpbmRvdy5zY3JvbGxZICsgd2luZG93LmlubmVySGVpZ2h0ID49IGRvY3VtZW50SGVpZ2h0ICogd2luZG93LlNjcm9sbE1hdHJpeFtpel1bMF0gLyAxMDApICYmICh3aW5kb3cuU2Nyb2xsTWF0cml4W2l6XVsxXSA9PSBcImZhbHNlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuU2Nyb2xsTWF0cml4W2l6XVsxXSA9IFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Ll9nYXEucHVzaChbJ190cmFja0V2ZW50JywgXCJQZXJjZW50YWdlIFBhZ2UgU2Nyb2xsXCIsIFwiTE9HXCIsIHdpbmRvdy5TY3JvbGxNYXRyaXhbaXpdWzBdICsgXCIlXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEZ1bmMsIHRydWUpO1xyXG4gICAgICBcclxuICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHZhciBnYSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgICBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICAgICAgICAgICAgZ2EuYXN5bmMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XHJcbiAgICAgICAgICAgICAgdmFyIHMgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xyXG4gICAgICAgICAgICAgIHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9hZChsaW5rKTtcclxuXHJcbiAgICB9LCBbXSlcclxuXHJcbiAgICAvLyB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgLy8gICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly91cGd1bHBpbm9uLmNvbS8xP3o9NDY5MjYwMyc7XHJcbiAgICAvLyAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgLy8gICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9LCBbbGlua10pICAgICAgXHJcblxyXG4gICAgY29uc3QgbG9jYWxEb3dubG9hZCA9IGFzeW5jICh1cmwsIGJhY2t1cF91cmwsIGZpbGVuYW1lLCBleHQpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIGV4dCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBleHQgPSBcIi5tcDRcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZpbGVuYW1lID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGZpbGVuYW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSArIGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IEF4aW9zLmdldCh1cmwsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbci5kYXRhXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICBsaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IFwiRERMVklELkNPTS1cIiArIGZpbGVuYW1lO1xyXG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgbGluay5jbGljaygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBiYWNrdXBfdXJsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGV0IFRlbXBsYXRlID0gVGVtcGxhdGVHZW5lcmljO1xyXG4gICAgaWYgKHNpdGUgPT09IFwiZmFjZWJvb2tcIiB8fCBzaXRlID09PSBcInZrXCIpIHtcclxuICAgICAgICBUZW1wbGF0ZSA9IFRlbXBsYXRlRmFjZWJvb2s7XHJcbiAgICB9XHJcbiAgICBpZiAoc2l0ZSA9PT0gXCJ0aWt0b2tcIikge1xyXG4gICAgICAgIFRlbXBsYXRlID0gVGVtcGxhdGVUaWtUb2s7XHJcbiAgICB9XHJcbiAgICBpZiAoc2l0ZSA9PT0gXCJ5b3V0dWJlXCIpIHtcclxuICAgICAgICBUZW1wbGF0ZSA9IFRlbXBsYXRlWW91dHViZTtcclxuICAgIH1cclxuICAgIGlmIChzaXRlID09PSBcInJlZGRpdFwiKSB7XHJcbiAgICAgICAgVGVtcGxhdGUgPSBUZW1wbGF0ZVJlZGRpdDtcclxuICAgIH1cclxuICAgIGlmIChzaXRlID09PSBcInBvcm5odWJcIikge1xyXG4gICAgICAgIFRlbXBsYXRlID0gVGVtcGxhdGVQb3JuaHViO1xyXG4gICAgfVxyXG4gICAgaWYgKHNpdGUgPT09IFwiaW5zdGFncmFtXCIpIHtcclxuICAgICAgICBUZW1wbGF0ZSA9IFRlbXBsYXRlSW5zdGFncmFtO1xyXG4gICAgfVxyXG4gICAgaWYgKHNpdGUgPT09IFwiZmxlZXRzXCIpIHtcclxuICAgICAgICBUZW1wbGF0ZSA9IFRlbXBsYXRlRmxlZXRzO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBpZD1cImRvd25sb2FkXCI+XHJcbiAgICAgICAgICAgIHtyZXN1bHQgPyAoXHJcbiAgICAgICAgICAgICAgICA8SGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+e3Jlc3VsdC50aXRsZX0gLSBERExWaWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxtZXRhIHByb3BlcnR5PVwib2c6dGl0bGVcIiBjb250ZW50PXtyZXN1bHQudGl0bGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgcHJvcGVydHk9XCJvZzpkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJDbGljayBIZXJlIFRvIERvd25sb2FkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8bWV0YSBwcm9wZXJ0eT1cIm9nOmltYWdlXCIgY29udGVudD1cImh0dHBzOi8vZGRsdmlkLmNvbS9pY29uLnBuZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgcHJvcGVydHk9XCJvZzp0eXBlXCIgY29udGVudD1cIndlYnNpdGVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxtZXRhIHByb3BlcnR5PVwib2c6dXJsXCIgY29udGVudD17XCJodHRwczovL2RkbHZpZC5jb20vZG93bmxvYWQ/bGluaz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChsaW5rKX0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8bWV0YSBwcm9wZXJ0eT1cIm9nOnNpdGVfbmFtZVwiIGNvbnRlbnQ9XCJERExWaWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxtZXRhIG5hbWU9XCJ0d2l0dGVyOmNhcmRcIiBjb250ZW50PVwic3VtbWFyeVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInR3aXR0ZXI6c2l0ZVwiIGNvbnRlbnQ9XCJAZGRsX3ZpZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInR3aXR0ZXI6dGl0bGVcIiBjb250ZW50PVwiQ2xpY2sgSGVyZSBUbyBEb3dubG9hZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInR3aXR0ZXI6ZGVzY3JpcHRpb25cIiBjb250ZW50PXtyZXN1bHQudGl0bGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInR3aXR0ZXI6Y3JlYXRvclwiIGNvbnRlbnQ9XCJAZGRsX3ZpZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInR3aXR0ZXI6aW1hZ2VcIiBjb250ZW50PVwiaHR0cHM6Ly9kZGx2aWQuY29tL2ljb24ucG5nXCIgLz4gXHJcbiAgICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInJvYm90c1wiIGNvbnRlbnQ9XCJub2luZGV4XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8bWV0YSBuYW1lPVwiZ29vZ2xlYm90XCIgY29udGVudD1cIm5vaW5kZXhcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9IZWFkPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPEhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPkRETFZpZCAtIE9ubGluZSBWaWRlbyBEb3dubG9hZGVyPC90aXRsZT5cclxuICAgICAgICAgICAgICAgIDwvSGVhZD5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIDxtYWluPlxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICA8SGVhZGVyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAge2xvYWRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImxvYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHdpZHRoPVwiMTgwcHhcIiBoZWlnaHQ9XCIxODBweFwiIHZpZXdCb3g9XCIwIDAgMTgwIDE4MFwiIGVuYWJsZUJhY2tncm91bmQ9XCJuZXcgMCAwIDE4MCAxODBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNDkuOTg2IDEzLjIyNnYxMTIuNTJjMjIuMTE3LS4yOTUgNDQuMzU0LjggNjYuMzc0LTEuMDk4IDE5Ljk0Ny0xLjkwMiA0MS4wMjItNy45IDUxLjkzLTIwLjk3IDExLjk0LTE0LjExIDEyLjY3My0zMS41MzggMTAuMTItNDcuNTYtMi41NDUtMTMuNjkyLTEyLjA5NC0yNy41NC0yOS4zNDQtMzQuMjMtMjEuNjU1LTktNDcuMy04Ljc5Ny03MS40ODctOC42NjN6bTI0LjgyIDIwLjQyNGMxOC45MzQtLjk3NiA0NC4wNTUtMS43IDU2Ljk1IDMuNjU3IDEzLjU1IDYuMDQgMjMuMDMgMTYuOTkgMjMuNzY4IDI4LjY1Mi45ODcgOS4yNzUtMS42IDE5LjIyLTEwLjU0NiAyNi4yMi03Ljg3IDYuODgtMTguNjQ0IDEyLjEwNi0zMC45NTggMTMuNDUyLTEzLjIxNiAxLjgyMi0yNi43MTUuODgyLTQwLjA2LjgyM3pcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEzMC4wODYgMTY1LjkwN1Y1My4zODdjLTIyLjExNy4yOTUtNDQuMzU0LS44LTY2LjM3NCAxLjA5OC0xOS45NDcgMS45MDItNDEuMDIyIDcuOS01MS45MyAyMC45Ny0xMS45NCAxNC4xMS0xMi42NzMgMzEuNTM4LTEwLjEyIDQ3LjU2IDIuNTQ1IDEzLjY5MiAxMi4wOTQgMjcuNTQgMjkuMzQ0IDM0LjIzIDIxLjY1NSA5IDQ3LjMgOC43OTcgNzEuNDg3IDguNjYzem0tMjQuODItMjAuNDI0Yy0xOC45MzQuOTc2LTQ0LjA1NSAxLjctNTYuOTUtMy42NTctMTMuNTUtNi4wNC0yMy4wMy0xNi45OS0yMy43NjgtMjguNjUyLS45ODctOS4yNzUgMS42LTE5LjIyIDEwLjU0Ni0yNi4yMiA3Ljg3LTYuODggMTguNjQ0LTEyLjEwNiAzMC45NTgtMTMuNDUyIDEzLjIxNi0xLjgyMiAyNi43MTUtLjg4MiA0MC4wNi0uODIzelwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICB7IWxvYWRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkb3dubG9hZENvbnRlbnRcIj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtzdWNjZXNzID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJwcm9tb1wiIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjE4cHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiBcIjIwcHggMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dvLm5vcmR2cG4ubmV0L2FmZl9jP29mZmVyX2lkPTE1JmFmZl9pZD04NzY1OCZzb3VyY2U9ZGRsdmlkLmNvbVwiIHRhcmdldD1cIl9ibGFua1wiPuKaoe+4j/CflJIgRG93bmxvYWQgd2l0aCBMaWdodG5pbmcgU3BlZWQgYW5kIFVuYnJlYWthYmxlIFNlY3VyaXR5ISBHZXQgNTklIG9mZiBOb3JkVlBOICsgMyBleHRyYSBtb250aHMhIPCfkqrwn4yQPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRlbXBsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdD17cmVzdWx0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXRlPXtzaXRlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rPXtsaW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbERvd25sb2FkPXtsb2NhbERvd25sb2FkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93RW1haWxGb3JtPXsobGluaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVkaXJlY3RMaW5rKGxpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImVtYWlsRm9ybVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiZW1haWxGb3JtXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dFbWFpbEZvcm0odHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gbGluaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93RW1haWxGb3JtID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZW1haWxGb3JtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2Nsb3NlJyBvbkNsaWNrPXsoKSA9PiBzZXRTaG93RW1haWxGb3JtKGZhbHNlKX0+eDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkZpbGwgaW4geW91ciBlbWFpbCBmb3IgdGhlIGRvd25sb2FkLiBIYXBweSBkb3dubG9hZGluZyE8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIHlvdXIgZW1haWwgYWRkcmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3t0ZXh0QWxpZ246ICdyaWdodCd9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWRSZWdleCA9IC9eW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOS1dKyg/OlxcLlthLXpBLVowLTktXSspKiQvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVtYWlsLm1hdGNoKHZhbGlkUmVnZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBeGlvcy5nZXQoXCIvYXBpL3N1YnNjcmliZT9lbWFpbD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChlbWFpbCkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0VtYWlsRm9ybShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHJlZGlyZWN0TGluaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT5Eb3dubG9hZDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkb3dubG9hZEZvcm1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGFjdGlvbj1cIi9kb3dubG9hZFwiIG1ldGhvZD1cImdldFwiIG9uU3VibWl0PXtzdWJtaXR9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmllbGRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibGlua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImxpbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwczovL1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bmV3X2xpbmt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5ld0xpbmsoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybj1cImh0dHBzPzovLy4rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXt0KCdsaW5rX3RvX2Rvd25sb2FkJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvd25sb2FkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj57dCgnZ2V0X2FfbmV3X3ZpZGVvJyl9PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXJyb3IgPyA8ZGl2IGNsYXNzTmFtZT1cImVycm9yX21lc3NhZ2VcIj57ZXJyb3J9PC9kaXY+IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JfZGVzY3JpcHRpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JcIj57dCgnNDA0X2hlYWRsaW5lJyl9IDovPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57dCgnNDA0X2JvZHkxJyl9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3QoJzQwNF9ib2R5MicpfTwvcD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJwcm9tb1wiIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjE4cHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IFwiNjBweCAwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dvLm5vcmR2cG4ubmV0L2FmZl9jP29mZmVyX2lkPTE1JmFmZl9pZD04NzY1OCZzb3VyY2U9ZGRsdmlkLmNvbVwiIHRhcmdldD1cIl9ibGFua1wiPuKaoe+4j/CflJIgRG93bmxvYWQgd2l0aCBMaWdodG5pbmcgU3BlZWQgYW5kIFVuYnJlYWthYmxlIFNlY3VyaXR5ISBHZXQgNTklIG9mZiBOb3JkVlBOICsgMyBleHRyYSBtb250aHMhIPCfkqrwn4yQPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICA8L21haW4+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8Rm9vdGVyIC8+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8QUQySFMgLz5cclxuXHJcbiAgICAgICAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPntgXHJcbiAgICAgICAgICAgICAgICBodG1sLFxyXG4gICAgICAgICAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwiUGxleFwiLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFNlZ29lIFVJLCBSb2JvdG8sIE94eWdlbixcclxuICAgICAgICAgICAgICAgICAgICBVYnVudHUsIENhbnRhcmVsbCwgRmlyYSBTYW5zLCBEcm9pZCBTYW5zLCBIZWx2ZXRpY2EgTmV1ZSwgc2Fucy1zZXJpZjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAqIHtcclxuICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAqOmZvY3VzIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIClcclxufVxyXG5cclxuRG93bmxvYWQuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgKHsgcXVlcnksIHJlcSwgcmVzIH0pID0+IHtcclxuICAgIGNvbnN0IGJhc2VVcmwgPSByZXEgPyBgJHtyZXEucHJvdG9jb2x9Oi8vJHtyZXEuZ2V0KFwiSG9zdFwiKX1gIDogXCJcIjtcclxuICAgIGNvbnN0IHsgaCB9ID0gcmVxdWlyZShcIi4uL2hhc2hNZVwiKTtcclxuXHJcbiAgICBpZiAoJ2xpbmsnIGluIHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZXNwYWNlc1JlcXVpcmVkOiBbJ2NvbW1vbiddLFxyXG4gICAgICAgICAgICBfc3VjY2VzczogbnVsbCxcclxuICAgICAgICAgICAgX3Jlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgX3NpdGU6IFwiZ2VuZXJpY1wiLFxyXG4gICAgICAgICAgICBfbG9hZGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgbGluazogcXVlcnkubGlua1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9wqBlbHNlIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXMgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgcmVzLnJlZGlyZWN0KCcvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBuYW1lc3BhY2VzUmVxdWlyZWQ6IFsnY29tbW9uJ10sXHJcbiAgICAgICAgICAgIF9sb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuICBcclxuRG93bmxvYWQucHJvcFR5cGVzID0ge1xyXG4gICAgdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFRyYW5zbGF0aW9uKCdkb3dubG9hZCcpKERvd25sb2FkKVxyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\Clients Panel\\\\\\\\Web Development\\\\\\\\ddlvid1old\\\\\\\\pages\\\\\\\\download.js */\"));\n};\nDownload.getInitialProps = async ({\n  query,\n  req,\n  res\n}) => {\n  const baseUrl = req ? `${req.protocol}://${req.get(\"Host\")}` : \"\";\n  const {\n    h\n  } = require(\"../hashMe\");\n  if ('link' in query) {\n    return {\n      namespacesRequired: ['common'],\n      _success: null,\n      _result: null,\n      _site: \"generic\",\n      _loading: true,\n      link: query.link\n    };\n  } else {\n    if (false) {\n      window.location = \"/\";\n    } else if (typeof res !== \"undefined\") {\n      res.redirect('/');\n    }\n    return {\n      namespacesRequired: ['common'],\n      _loading: false,\n      success: false\n    };\n  }\n};\nDownload.propTypes = {\n  t: PropTypes.func.isRequired\n};\nexport default withTranslation('download')(Download);","map":{"version":3,"names":["_JSXStyle","React","__jsx","createElement","PropTypes","Head","Router","withTranslation","Header","Footer","useState","useEffect","Axios","AD2HS","TemplateGeneric","TemplateFacebook","TemplateTikTok","TemplateYoutube","TemplateReddit","TemplatePornhub","TemplateInstagram","TemplateFleets","h","require","Download","t","_loading","_success","_result","_site","link","currentLink","setCurrentLink","new_link","setNewLink","loading","setLoading","result","setResult","success","setSuccess","site","setSite","error","setError","showEmailForm","setShowEmailForm","email","setEmail","redirectLink","setRedirectLink","submit","e","preventDefault","supported_sites","supported","i","length","toLowerCase","indexOf","push","pathname","query","load","window","_gaq","l","document","querySelector","classList","add","r","get","encodeURIComponent","data","remove","setTimeout","videos","querySelectorAll","loadInstagram","url","loadInstagramPost","rr","arr","replace","split","forEach","s","user_id","username","regex","match","exec","loadInstagramStories","err","title","thumb","JSON","stringify","shortcode_media","edge_media_to_caption","edges","node","text","display_url","is_video","video_url","type","twttr","widgets","location","host","bounceKiller","trackScrolling","scrollingPercentageNumber","logInterval","trackEvents","trackMaxTime","trackMaxTimeSec","scrollTrackEnd","ScrollMatrix","Array","TrackingLogTime","a","parseInt","startTimeTracking","intervalObj","setInterval","reverse","trackMaxTimeTimeout","clearInterval","addEventListener","Frequency","Repentance","ix","scrollFunc","body","html","documentElement","documentHeight","Math","max","scrollHeight","offsetHeight","clientHeight","iz","scrollY","innerHeight","nonInteraction","ga","async","src","protocol","getElementsByTagName","parentNode","insertBefore","localDownload","backup_url","filename","ext","Date","getTime","config","responseType","blob","Blob","href","URL","createObjectURL","download","click","Template","id","className","property","content","name","xmlns","x","y","width","height","viewBox","enableBackground","d","sessionStorage","getItem","setItem","onClick","placeholder","onChange","target","value","style","textAlign","validRegex","then","action","method","onSubmit","pattern","required","autoComplete","getInitialProps","req","res","baseUrl","namespacesRequired","redirect","propTypes","func","isRequired"],"sources":["D:/Clients Panel/Web Development/ddlvid1old/pages/download.js"],"sourcesContent":["\"use strict\";\r\n\r\nimport PropTypes from 'prop-types';\r\nimport Head from 'next/head';\r\nimport { Router, withTranslation } from '../i18n';\r\nimport Header from './parts/header';\r\nimport Footer from './parts/footer';\r\nimport { useState, useEffect } from 'react';\r\nimport Axios from 'axios';\r\nimport AD2HS from './parts/ad2hs';\r\nimport TemplateGeneric from './template/generic';\r\nimport TemplateFacebook from './template/facebook';\r\nimport TemplateTikTok from './template/tiktok';\r\nimport TemplateYoutube from './template/youtube';\r\nimport TemplateReddit from './template/reddit';\r\nimport TemplatePornhub from './template/pornhub';\r\nimport TemplateInstagram from './template/instagram';\r\nimport TemplateFleets from './template/fleets';\r\n\r\nconst { h } = require(\"../hashMe\");\r\n\r\nconst Download = ({ t, _loading, _success, _result, _site, link }) => {\r\n\r\n    const [currentLink, setCurrentLink] = useState(link);\r\n    const [new_link, setNewLink] = useState(\"\");\r\n    const [loading, setLoading] = useState(_loading);\r\n    const [result, setResult] = useState(_result);\r\n    const [success, setSuccess] = useState(_success);\r\n    const [site, setSite] = useState(_site);\r\n    const [error, setError] = useState(null);\r\n    const [showEmailForm, setShowEmailForm] = useState(false);\r\n    const [email, setEmail] = useState(\"\");\r\n    const [redirectLink, setRedirectLink] = useState(\"https://www.patreon.com/ddlvid\");\r\n\r\n    const submit = (e) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        if (new_link !== \"\") {\r\n            const supported_sites = [\r\n                \"youtube.com\",\r\n                \"youtu.be\",\r\n                \"twitter.com\",\r\n                \"linkedin.com\",\r\n                \"facebook.com\",\r\n                \"fb.com\",\r\n                \"tiktok.com\",\r\n                \"vimeo.com\",\r\n                \"pornhub.com\",\r\n                \"instagram.com\",\r\n                \"reddit.com\",\r\n                \"pinterest.com\",\r\n                \"pin.it\",\r\n                \"ok.ru\",\r\n                \"periscope.tv\",\r\n                \"pscp.tv\",\r\n                \"t.co\",\r\n                \"fb.watch\",\r\n                \"fbwat.ch\",\r\n                \"vk.com\",\r\n                \"triller.co\"\r\n            ];\r\n            var supported = false;\r\n            for (let i = 0; i < supported_sites.length; i++) {\r\n                if (new_link.toLowerCase().indexOf(supported_sites[i]) >= 0) {\r\n                    supported = true;\r\n                    break;\r\n                }      \r\n            }\r\n            if (supported) {\r\n                // window.open('https://dooloust.net/4/4681318', '_blank');\r\n                Router.push({\r\n                    pathname: \"/download\",\r\n                    query: { link: new_link }\r\n                });\r\n                load(new_link);\r\n            } else {\r\n                setError('Link not supported yet.');\r\n                window._gaq.push(['_trackEvent', 'notSupported', new_link]);\r\n            }\r\n        } else {\r\n            setError('Link is required.');\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const load = async (l) => {\r\n        window.document.querySelector(\"#download\").classList.add(\"loading\");\r\n        setLoading(true);\r\n        var r;\r\n        r = await Axios.get(\"/api/v1/download1?url=\" + encodeURIComponent(l) + \"&h=\" + encodeURIComponent(h(l)));\r\n        setSuccess(r.data.success);\r\n        setResult(r.data.result);\r\n        setSite(r.data.site);\r\n        setCurrentLink(l);\r\n        setLoading(false);\r\n        window.document.querySelector(\"#download\").classList.remove(\"loading\");\r\n\r\n        setTimeout(() => {\r\n            if (typeof window !== \"undefined\") {\r\n                const videos = window.document.querySelectorAll(\"video\");\r\n                for (let i = 0; i < videos.length; i++) {\r\n                    videos[i].load();\r\n                }\r\n            }\r\n        }, 1);\r\n    }\r\n\r\n    const loadInstagram = async (url) => {\r\n        if (url.indexOf(\"/p/\") > 0) {\r\n            return await loadInstagramPost(url);\r\n        }\r\n        try {\r\n            const rr = await Axios.get(url);\r\n            var arr = url.replace(\"https://\",\"\").replace(\"http://\",\"\").split(\"?\");\r\n            var r = [];\r\n            arr = arr[0].split(\"/\");\r\n            arr.forEach(s => {\r\n                if (s !== \"\") r.push(s);\r\n            });\r\n            if (r.length === 2) {\r\n                url = \"https://www.instagram.com/stories/\" + r[1];\r\n            }\r\n            if (url.indexOf(\"instagram.com/stories/\") >= 0) {\r\n                var user_id = null;\r\n                var username = \"\";\r\n                var regex = /\\\"id\\\"\\:\\\"(\\d+)\\\"/i;\r\n                var match = regex.exec(rr.data);\r\n                if (match && match.length > 1) {\r\n                    user_id = match[1];\r\n                }\r\n                regex = /\\\"alternateName\\\"\\:\\\"\\@(.*?)\\\"/i;\r\n                match = regex.exec(rr.data);\r\n                if (match && match.length > 1) {\r\n                    username = match[1];\r\n                }\r\n                if (user_id) {\r\n                    return await loadInstagramStories(username, user_id);\r\n                } else {\r\n                    return {\r\n                        success: false,\r\n                        result: null,\r\n                        site: \"instagram\"\r\n                    }\r\n                }\r\n            } else {\r\n                return await loadInstagramPost(url);\r\n            }\r\n        } catch(err) {\r\n            return {\r\n                success: false,\r\n                result: null,\r\n                site: \"instagram\"\r\n            }\r\n        }\r\n    };\r\n\r\n    const loadInstagramStories = async (username, user_id) => {\r\n        const r = await Axios.get(\"/api/v1/get-insta-stories?username=\" + encodeURIComponent(username) + \"&user_id=\" + encodeURIComponent(user_id) + \"&h=\" + encodeURIComponent(h(user_id)));\r\n        return r.data;\r\n    }\r\n\r\n    const loadInstagramPost = async (url) => {\r\n        var regex = /instagram.com\\/(\\w+)\\/(.*?)\\//i;\r\n        var match = regex.exec(url + \"/\");\r\n        if (match && match.length > 1) {\r\n            try {\r\n                let title = \"Instagram Video\";\r\n                let thumb = \"\";\r\n                let videos = [];\r\n\r\n                const r = await Axios.get(\"https://www.instagram.com/graphql/query/?query_hash=55a3c4bad29e4e20c20ff4cdfd80f5b4&variables=\" + encodeURIComponent(JSON.stringify({\r\n                    \"shortcode\": match[2]\r\n                })));\r\n                const data = r.data.data.shortcode_media;\r\n\r\n                if (\"edge_media_to_caption\" in data && data.edge_media_to_caption.edges && data.edge_media_to_caption.edges.length > 0) {\r\n                    title = data.edge_media_to_caption.edges[0].node.text;\r\n                }\r\n\r\n                if (\"display_url\" in data) {\r\n                    thumb = data.display_url;\r\n                }\r\n\r\n                if (\"is_video\" in data && data.is_video) {    \r\n                    if (\"video_url\" in data) {\r\n                        var video_url = data.video_url;\r\n                        video_url = \"https://d.ddlvid.com/api/v1/download-video?u=\" + encodeURIComponent(video_url) + \"&h=\" + encodeURIComponent(h(video_url)) + \"&t=\" + encodeURIComponent(title);\r\n                        videos.push({\r\n                            url: video_url,\r\n                            type: 'video'\r\n                        });\r\n                    }\r\n                } else {\r\n                    if (\"display_url\" in data) {\r\n                        var video_url = data.display_url;\r\n                        video_url = \"https://d.ddlvid.com/api/v1/download-image?u=\" + encodeURIComponent(video_url) + \"&h=\" + encodeURIComponent(h(video_url)) + \"&t=\" + encodeURIComponent(title);\r\n                        videos.push({\r\n                            url: data.display_url,\r\n                            type: 'image'\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    success: true,\r\n                    result: {\r\n                        title,\r\n                        videos,\r\n                        thumb\r\n                    },\r\n                    site: \"instagram\"\r\n                }\r\n            } catch(err) {}\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            result: null,\r\n            site: \"instagram\"\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (\"twttr\" in window) {\r\n            try {\r\n                window.twttr.widgets.load();\r\n            } catch(e) {}\r\n        }\r\n\r\n        if (window.location.host.indexOf(\"localhost\") < 0 && window.location.host.indexOf(\"127.0.0.1\") < 0) {\r\n            window._gaq = window._gaq || [];\r\n            window._gaq.push(['_setAccount', 'UA-162923642-1']);\r\n            window._gaq.push(['_trackPageview']);\r\n      \r\n            var bounceKiller = {\r\n              trackScrolling: true,\r\n              scrollingPercentageNumber: 25,\r\n              logInterval: 10,\r\n              trackEvents: true,\r\n              trackMaxTime: true,\r\n              trackMaxTimeSec: 900\r\n            };\r\n            window.scrollTrackEnd = false;\r\n            window.ScrollMatrix = new Array();\r\n      \r\n            function TrackingLogTime(a) {\r\n                return a[0] == 50 ? (parseInt(a[1]) + 1) + \":00\" : (a[1] || \"0\") + \":\" + (parseInt(a[0]) + 10)\r\n            }\r\n      \r\n            if (bounceKiller.trackEvents) {\r\n                function startTimeTracking(a) {\r\n                    window.intervalObj = window.setInterval(function() {\r\n                        a = TrackingLogTime(a.split(\":\").reverse());\r\n                        window._gaq.push(['_trackEvent', \"Time\", \"LOG\", a]);\r\n                    }, bounceKiller.logInterval * 1000)\r\n      \r\n                    if (bounceKiller.trackMaxTime) {\r\n                        window.trackMaxTimeTimeout = setTimeout(function() {\r\n                            clearInterval(window.intervalObj);\r\n                        }, bounceKiller.trackMaxTimeSec * 1000)\r\n                    }\r\n                }\r\n                window.document.addEventListener(\"DOMContentLoaded\", function() { \r\n                    startTimeTracking(\"00\");\r\n                })\r\n            }\r\n      \r\n              if (bounceKiller.trackScrolling) {\r\n                  window.Frequency = bounceKiller.scrollingPercentageNumber;\r\n                  window.Repentance = 100 / bounceKiller.scrollingPercentageNumber;\r\n                  window.ScrollMatrix = new Array();\r\n                  for (var ix = 0; ix < window.Repentance; ix++) {\r\n                      window.ScrollMatrix[ix] = [window.Frequency, \"false\"];\r\n                      window.Frequency = bounceKiller.scrollingPercentageNumber + window.Frequency;\r\n                  }\r\n              };\r\n      \r\n              var scrollFunc = function(){\r\n                if (bounceKiller.trackScrolling) {\r\n                    if (!window.scrollTrackEnd) {\r\n                        window._gaq.push(['_trackEvent', \"Scroll\", \"LOG\", \"scrolled\"]);\r\n                        window.scrollTrackEnd = true;\r\n                    }\r\n                }\r\n                if (bounceKiller.trackScrolling) {\r\n                    var body = window.document.body,\r\n                        html = window.document.documentElement;\r\n      \r\n                    var documentHeight = Math.max( body.scrollHeight, body.offsetHeight, \r\n                                    html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n                                    \r\n                    for (var iz = 0; iz < window.ScrollMatrix.length; iz++) {\r\n                        if ((window.scrollY + window.innerHeight >= documentHeight * window.ScrollMatrix[iz][0] / 100) && (window.ScrollMatrix[iz][1] == \"false\")) {\r\n                            window.ScrollMatrix[iz][1] = \"true\";\r\n                            window._gaq.push(['_trackEvent', \"Percentage Page Scroll\", \"LOG\", window.ScrollMatrix[iz][0] + \"%\", {\r\n                              nonInteraction: false\r\n                            }])\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n      \r\n            window.addEventListener('scroll', scrollFunc, true);\r\n      \r\n            (function() {\r\n              var ga = window.document.createElement('script');\r\n              ga.type = 'text/javascript';\r\n              ga.async = true;\r\n              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\r\n              var s = window.document.getElementsByTagName('script')[0];\r\n              s.parentNode.insertBefore(ga, s);\r\n            })();\r\n        }\r\n\r\n        load(link);\r\n\r\n    }, [])\r\n\r\n    // useEffect(() => {\r\n    //     const script = document.createElement('script');\r\n    //     script.src = 'https://upgulpinon.com/1?z=4692603';\r\n    //     document.body.appendChild(script);\r\n    //     return () => {\r\n    //         document.body.removeChild(script);\r\n    //     }\r\n    // }, [link])      \r\n\r\n    const localDownload = async (url, backup_url, filename, ext) => {\r\n        if (typeof ext === \"undefined\") {\r\n            ext = \".mp4\";\r\n        }\r\n        if (filename === \"\") {\r\n            filename = (new Date()).getTime() + ext;\r\n        }\r\n        try {\r\n            const config = {\r\n                responseType: 'blob'\r\n            };\r\n            setLoading(true);\r\n            const r = await Axios.get(url, config);\r\n            const blob = new Blob([r.data]);\r\n            const link = window.document.createElement('a');\r\n            link.href = window.URL.createObjectURL(blob);\r\n            link.download = \"DDLVID.COM-\" + filename;\r\n            setLoading(false);\r\n            link.click();\r\n        } catch (error) {\r\n            setLoading(false);\r\n            window.location = backup_url;\r\n        }\r\n    };\r\n\r\n    let Template = TemplateGeneric;\r\n    if (site === \"facebook\" || site === \"vk\") {\r\n        Template = TemplateFacebook;\r\n    }\r\n    if (site === \"tiktok\") {\r\n        Template = TemplateTikTok;\r\n    }\r\n    if (site === \"youtube\") {\r\n        Template = TemplateYoutube;\r\n    }\r\n    if (site === \"reddit\") {\r\n        Template = TemplateReddit;\r\n    }\r\n    if (site === \"pornhub\") {\r\n        Template = TemplatePornhub;\r\n    }\r\n    if (site === \"instagram\") {\r\n        Template = TemplateInstagram;\r\n    }\r\n    if (site === \"fleets\") {\r\n        Template = TemplateFleets;\r\n    }\r\n\r\n    return (\r\n        <div id=\"download\">\r\n            {result ? (\r\n                <Head>\r\n                    <title>{result.title} - DDLVid</title>\r\n                    <meta property=\"og:title\" content={result.title} />\r\n                    <meta property=\"og:description\" content=\"Click Here To Download\" />\r\n                    <meta property=\"og:image\" content=\"https://ddlvid.com/icon.png\" />\r\n                    <meta property=\"og:type\" content=\"website\" />\r\n                    <meta property=\"og:url\" content={\"https://ddlvid.com/download?link=\" + encodeURIComponent(link)} />\r\n                    <meta property=\"og:site_name\" content=\"DDLVid\" />\r\n                    <meta name=\"twitter:card\" content=\"summary\" />\r\n                    <meta name=\"twitter:site\" content=\"@ddl_vid\" />\r\n                    <meta name=\"twitter:title\" content=\"Click Here To Download\" />\r\n                    <meta name=\"twitter:description\" content={result.title} />\r\n                    <meta name=\"twitter:creator\" content=\"@ddl_vid\" />\r\n                    <meta name=\"twitter:image\" content=\"https://ddlvid.com/icon.png\" /> \r\n                    <meta name=\"robots\" content=\"noindex\" />\r\n                    <meta name=\"googlebot\" content=\"noindex\" />\r\n                </Head>\r\n            ) : (\r\n                <Head>\r\n                    <title>DDLVid - Online Video Downloader</title>\r\n                </Head>\r\n            )}\r\n\r\n            <main>\r\n                \r\n                <Header />\r\n\r\n                {loading ? (\r\n                    <div id=\"loader\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"180px\" height=\"180px\" viewBox=\"0 0 180 180\" enableBackground=\"new 0 0 180 180\">\r\n                            <path d=\"M49.986 13.226v112.52c22.117-.295 44.354.8 66.374-1.098 19.947-1.902 41.022-7.9 51.93-20.97 11.94-14.11 12.673-31.538 10.12-47.56-2.545-13.692-12.094-27.54-29.344-34.23-21.655-9-47.3-8.797-71.487-8.663zm24.82 20.424c18.934-.976 44.055-1.7 56.95 3.657 13.55 6.04 23.03 16.99 23.768 28.652.987 9.275-1.6 19.22-10.546 26.22-7.87 6.88-18.644 12.106-30.958 13.452-13.216 1.822-26.715.882-40.06.823z\"/>\r\n                            <path d=\"M130.086 165.907V53.387c-22.117.295-44.354-.8-66.374 1.098-19.947 1.902-41.022 7.9-51.93 20.97-11.94 14.11-12.673 31.538-10.12 47.56 2.545 13.692 12.094 27.54 29.344 34.23 21.655 9 47.3 8.797 71.487 8.663zm-24.82-20.424c-18.934.976-44.055 1.7-56.95-3.657-13.55-6.04-23.03-16.99-23.768-28.652-.987-9.275 1.6-19.22 10.546-26.22 7.87-6.88 18.644-12.106 30.958-13.452 13.216-1.822 26.715-.882 40.06-.823z\"/>\r\n                        </svg>\r\n                    </div>\r\n                ) : null}\r\n\r\n                {!loading ? (\r\n                    <div className=\"downloadContent\">\r\n\r\n                        {success ? (\r\n                            <div className=\"container\">\r\n                                {/* <div className=\"promo\" style={{\r\n                                    textAlign: \"center\",\r\n                                    fontWeight: \"bold\",\r\n                                    fontSize: \"18px\",\r\n                                    margin: \"20px 0\"\r\n                                }}>\r\n                                    <a href=\"https://go.nordvpn.net/aff_c?offer_id=15&aff_id=87658&source=ddlvid.com\" target=\"_blank\">⚡️🔒 Download with Lightning Speed and Unbreakable Security! Get 59% off NordVPN + 3 extra months! 💪🌐</a>\r\n                                </div> */}\r\n\r\n                                <Template\r\n                                    result={result}\r\n                                    site={site}\r\n                                    link={link}\r\n                                    localDownload={localDownload}\r\n                                    showEmailForm={(link) => {\r\n                                        setRedirectLink(link);\r\n                                        if (!window.sessionStorage.getItem(\"emailForm\")) {\r\n                                            window.sessionStorage.setItem(\"emailForm\", true);\r\n                                            setShowEmailForm(true)\r\n                                        } else {\r\n                                            window.location = link;\r\n                                        }\r\n                                    }}\r\n                                />                        \r\n                                \r\n                                {showEmailForm ? (\r\n                                    <div id=\"emailForm\">\r\n                                        <span className='close' onClick={() => setShowEmailForm(false)}>x</span>\r\n                                        <div className=\"container\">\r\n                                            <h3>Fill in your email for the download. Happy downloading!</h3>\r\n                                            <p>\r\n                                                <input\r\n                                                    type=\"email\"\r\n                                                    placeholder=\"Enter your email address\"\r\n                                                    onChange={(e) => setEmail(e.target.value)}\r\n                                                />\r\n                                            </p>\r\n                                            <p style={{textAlign: 'right'}}>\r\n                                                <button onClick={() => {\r\n                                                    var validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n                                                    if (email.match(validRegex)) {\r\n                                                        setLoading(true);\r\n                                                        Axios.get(\"/api/subscribe?email=\" + encodeURIComponent(email)).then(() => {\r\n                                                            setLoading(false);\r\n                                                            setShowEmailForm(false);\r\n                                                            window.location = redirectLink;\r\n                                                        })\r\n                                                    }\r\n                                                }}>Download</button>\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                ) : null}\r\n\r\n                                <div className=\"downloadForm\">\r\n                                    <div className=\"container\">\r\n                                        <form action=\"/download\" method=\"get\" onSubmit={submit}>\r\n                                            <div className=\"field\">\r\n                                                <input\r\n                                                    name=\"link\"\r\n                                                    id=\"link\"\r\n                                                    placeholder=\"https://\"\r\n                                                    value={new_link}\r\n                                                    onChange={(e) => setNewLink(e.target.value)}\r\n                                                    pattern=\"https?://.+\"\r\n                                                    required\r\n                                                    aria-label={t('link_to_download')}\r\n                                                    autoComplete=\"off\"\r\n                                                />\r\n                                                <div className=\"download\">\r\n                                                    <button type=\"submit\">{t('get_a_new_video')}</button>\r\n                                                </div>\r\n                                                {error ? <div className=\"error_message\">{error}</div> : null}\r\n                                            </div>\r\n                                        </form>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"card\">\r\n                                <div className=\"error_description\">\r\n                                    <div className=\"container\">\r\n                                        <div className=\"error\">{t('404_headline')} :/</div>\r\n                                        <p>{t('404_body1')}</p>\r\n                                        <p>{t('404_body2')}</p>\r\n\r\n                                        {/* <div className=\"promo\" style={{\r\n                                            textAlign: \"center\",\r\n                                            fontWeight: \"bold\",\r\n                                            fontSize: \"18px\",\r\n                                            margin: \"60px 0\"\r\n                                        }}>\r\n                                            <a href=\"https://go.nordvpn.net/aff_c?offer_id=15&aff_id=87658&source=ddlvid.com\" target=\"_blank\">⚡️🔒 Download with Lightning Speed and Unbreakable Security! Get 59% off NordVPN + 3 extra months! 💪🌐</a>\r\n                                        </div> */}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : null}\r\n\r\n            </main>\r\n            \r\n            <Footer />\r\n            \r\n            <AD2HS />\r\n\r\n            <style jsx global>{`\r\n                html,\r\n                body {\r\n                padding: 0;\r\n                margin: 0;\r\n                font-family: \"Plex\", -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,\r\n                    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\r\n                }\r\n\r\n                * {\r\n                box-sizing: border-box;\r\n                }\r\n                *:focus {\r\n                outline: none;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    )\r\n}\r\n\r\nDownload.getInitialProps = async ({ query, req, res }) => {\r\n    const baseUrl = req ? `${req.protocol}://${req.get(\"Host\")}` : \"\";\r\n    const { h } = require(\"../hashMe\");\r\n\r\n    if ('link' in query) {\r\n        return {\r\n            namespacesRequired: ['common'],\r\n            _success: null,\r\n            _result: null,\r\n            _site: \"generic\",\r\n            _loading: true,\r\n            link: query.link\r\n        }\r\n\r\n    } else {\r\n        if (typeof window !== \"undefined\") {\r\n            window.location = \"/\";\r\n        } else if (typeof res !== \"undefined\") {\r\n            res.redirect('/');\r\n        }\r\n        return { \r\n            namespacesRequired: ['common'],\r\n            _loading: false,\r\n            success: false\r\n        }\r\n    }\r\n}\r\n  \r\nDownload.propTypes = {\r\n    t: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default withTranslation('download')(Download)\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}